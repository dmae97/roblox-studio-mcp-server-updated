# Roblox Studio MCP Server\n\nAn implementation of the Model Context Protocol (MCP) server specifically designed for Roblox Studio, built with TypeScript.\n\n![GitHub Workflow Status](https://img.shields.io/github/actions/workflow/status/dmae97/roblox-studio-mcp-server-updated/ci.yml?branch=main)\n![License](https://img.shields.io/badge/license-MIT-blue.svg)\n\n## 개요\n\n이 MCP 서버는 Roblox Studio 개발을 위한 특화된 리소스, 도구 및 프롬프트를 제공합니다. 표준화된 인터페이스를 통해 LLM 애플리케이션이 Roblox Studio 문서, 템플릿, 코드 생성 기능 등에 접근할 수 있습니다.\n\n## 향상된 기능\n\n- **JWT 인증**: 역할 기반 액세스 제어가 포함된 안전한 JWT 기반 인증\n- **Docker 지원**: Docker 및 Docker Compose를 통한 쉬운 배포 및 확장\n- **테스트 프레임워크**: Jest를 사용한 단위 및 통합 테스트\n- **CI/CD 파이프라인**: GitHub Actions를 통한 자동화된 테스트 및 배포\n- **보안 강화**: Helmet을 사용한 HTTP 헤더 보안 및 환경 변수 검증\n- **개선된 로깅**: Winston을 사용한 구조화된 로깅 시스템\n- **모니터링**: Prometheus 및 Grafana 지원(선택 사항)\n- **확장 가능한 아키텍처**: 쉬운 확장을 위한 모듈식 설계\n- **WebSocket 지원**: 더 나은 실시간 통신을 위한 SSE 대안\n- **연결 관리**: 강력한 연결 추적 및 상태 모니터링\n- **API 버전 관리**: 여러 API 버전 지원 및 점진적 서비스 중단\n- **고급 속도 제한**: API 보호를 위한 유연한 속도 제한 전략\n- **자동 재시도**: 실패한 작업에 대한 구성 가능한 재시도 메커니즘\n\n## 최근 업데이트 (2025-05-09)\n\n- **ESM 기반 구성 개선**: Jest 및 ESLint 구성을 위한 ESM 호환성 수정\n- **E2E 테스트 추가**: 통합 테스트 프레임워크와 예제 추가\n- **WebSocket 트랜스포트 테스트**: 실시간 통신을 위한 테스트 추가\n- **지표 관리 미들웨어 개선**: 성능 모니터링 기능 강화\n- **GitHub Actions 워크플로우 향상**: CI/CD 파이프라인 확장\n\n## 기능\n\n- **리소스**: Roblox Studio 문서, API 참조 및 코드 템플릿 액세스\n- **도구**: Luau 코드 생성 및 검증, 에셋 검색, 게임 컴포넌트 생성\n- **프롬프트**: 스크립트 생성, 버그 찾기 및 성능 최적화를 위한 특수 프롬프트\n- **API 통합**: Roblox API 및 Open Cloud API에 직접 연결\n- **인터랙티브 시스템**: 대화 시스템, UI 인터페이스 및 복잡한 게임플레이 메커니즘 생성\n- **향상된 성능**: 최적의 성능을 위한 내장 캐싱 및 속도 제한\n- **강력한 오류 처리**: 포괄적인 오류 관리 및 원활한 복구\n- **지표 및 모니터링**: 내장된 상태 확인 및 성능 지표\n\n## 전제 조건\n\n- Node.js >= 18.x\n- npm 또는 yarn\n- Docker 및 Docker Compose (선택 사항)\n- Roblox API 키 (API 통합 기능용)\n- Roblox Open Cloud API 키 (Open Cloud 기능용)\n\n## 설치\n\n1. 저장소 복제\n```bash\ngit clone https://github.com/dmae97/roblox-studio-mcp-server-updated.git\ncd roblox-studio-mcp-server-updated\n```\n\n2. 종속성 설치\n```bash\nnpm install\n```\n\n3. `.env.example`을 기반으로 `.env` 파일 생성\n```bash\ncp .env.example .env\n```\n\n4. Roblox API 키 및 기타 구성으로 `.env` 파일 업데이트\n```\nROBLOX_API_KEY=your_api_key_here\nROBLOX_OPEN_CLOUD_API_KEY=your_open_cloud_api_key_here\nROBLOX_OPEN_CLOUD_UNIVERSE_ID=your_universe_id_here\nJWT_SECRET=your_jwt_secret_here\nJWT_REFRESH_SECRET=your_refresh_secret_here\n```\n\n5. 프로젝트 빌드\n```bash\nnpm run build\n```\n\n## 서버 실행\n\n개발 모드에서 서버 시작:\n```bash\nnpm run dev\n```\n\n또는 프로덕션 서버 시작:\n```bash\nnpm start\n```\n\n서버는 기본적으로 포트 3000에서 시작됩니다(`.env`에서 구성 가능).\n\n## Docker 배포\n\nDocker를 사용하여 서버를 실행할 수도 있습니다:\n\n```bash\n# 이미지 빌드\nnpm run docker:build\n\n# 컨테이너 실행\nnpm run docker:run\n```\n\n또는 Docker Compose 사용:\n\n```bash\ndocker-compose up -d\n```\n\n## 테스트 실행\n\n단위 테스트 실행:\n```bash\nnpm test\n```\n\n테스트 커버리지 보고서 생성:\n```bash\nnpm run test:coverage\n```\n\n통합 테스트 실행:\n```bash\nnpm run test:integration\n```\n\n## API 엔드포인트\n\n### MCP 관련 엔드포인트\n- `GET /sse` - MCP 통신을 위한 서버 전송 이벤트 엔드포인트\n- `GET /ws` - MCP 통신을 위한 WebSocket 엔드포인트(SSE의 대안)\n- `POST /messages` - MCP 통신을 위한 메시지 엔드포인트\n- `GET /health` - 서버 상태 확인 엔드포인트\n- `GET /metrics` - 서버 지표 엔드포인트\n\n### 인증 엔드포인트\n- `POST /auth/login` - 사용자 로그인 및 토큰 발급\n- `POST /auth/refresh` - 새로고침 토큰을 사용한 새 액세스 토큰 발급\n- `GET /auth/validate` - 토큰 유효성 검사\n- `GET /auth/admin` - 관리자 권한 확인(관리자 전용)\n\n## 구성 옵션\n\n서버는 `.env` 파일의 환경 변수를 사용하여 구성할 수 있습니다:\n\n### 서버 구성\n- `PORT` - 서버를 실행할 포트(기본값: 3000)\n- `SERVER_NAME` - 서버 이름(기본값: \"Roblox Studio MCP Server\")\n- `SERVER_VERSION` - 서버 버전(기본값: \"1.0.0\")\n- `NODE_ENV` - 환경(development/production)\n- `DEBUG` - 디버그 모드 활성화(true/false)\n\n### 로깅 구성\n- `LOG_LEVEL` - 로깅 수준(info, warn, error, debug)\n- `LOG_TIMESTAMP` - 로그에 타임스탬프 포함(true/false)\n- `LOG_COLOR` - 로그 출력 색상화(true/false)\n\n### 성능 설정\n- `ENABLE_RATE_LIMITING` - 속도 제한 활성화(true/false)\n- `RATE_LIMIT_WINDOW` - 속도 제한 시간 창(밀리초)\n- `RATE_LIMIT_MAX_REQUESTS` - 창당 최대 요청 수\n- `CACHE_TTL` - 캐시된 데이터의 유효 시간(초)\n- `CACHE_CHECK_PERIOD` - 만료된 캐시 항목에 대한 검사 간격(초)\n\n### 보안 설정\n- `CORS_ORIGINS` - 허용된 출처의 쉼표로 구분된 목록 또는 모든 출처에 대한 *\n- `JWT_SECRET` - JWT 토큰 생성 및 확인을 위한 비밀 키\n- `JWT_EXPIRES_IN` - 토큰 만료 시간(초)(기본값: 1시간)\n- `JWT_REFRESH_SECRET` - JWT 새로 고침 토큰 생성 및 확인을 위한 비밀 키\n- `JWT_REFRESH_EXPIRES_IN` - 새로 고침 토큰 만료 시간(초)(기본값: 1주)\n\n## 리소스\n\n### 문서\n\n- `docs://api/{section}` - Roblox Studio API 문서 액세스\n- `docs://api` - 사용 가능한 문서 섹션 나열\n- `docs://luau` - Luau 언어 문서 및 모범 사례\n- `docs://services/{service}` - 특정 Roblox 서비스에 대한 문서\n\n### 템플릿\n\n- `template://roblox/{category}/{name}` - 코드 템플릿 액세스\n- `template://roblox` - 사용 가능한 템플릿 나열\n- `template://ui/{component}` - Roblox UI를 사용한 UI 컴포넌트 템플릿\n\n## 개발\n\n### 프로젝트 구조\n\n```\n.\n├── src/                    # 소스 코드\n│   ├── api/                # API 관련 코드\n│   ├── auth/               # 인증 코드\n│   ├── connection/         # 연결 관리\n│   ├── middleware/         # Express 미들웨어\n│   ├── resources/          # MCP 리소스\n│   ├── tools/              # MCP 도구\n│   │   ├── datastore/      # DataStore 도구\n│   │   ├── interactive/    # 대화형 시스템 도구\n│   │   ├── opencloud/      # Open Cloud 통합 도구\n│   │   └── physics/        # 물리 시스템 도구\n│   ├── prompts/            # MCP 프롬프트\n│   ├── tests/              # 테스트 코드\n│   ├── utils/              # 유틸리티 함수\n│   └── index.ts            # 애플리케이션 진입점\n├── prometheus/             # Prometheus 구성\n├── .env.example           # 환경 변수 예제\n├── Dockerfile             # Docker 빌드 정의\n├── docker-compose.yml     # Docker Compose 구성\n├── package.json           # 프로젝트 메타데이터 및 종속성\n├── tsconfig.json          # TypeScript 구성\n└── README.md              # 문서\n```\n\n## MCP 서버에 연결\n\n### 예제 1: API를 사용하여 Claude 사용\n\n```javascript\n// 웹 애플리케이션에서 Claude를 사용하여 MCP 서버를 호출하는 예제 코드\nasync function callRobloxMcp() {\n  const response = await fetch('https://your-claude-api-endpoint/messages', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer your-claude-api-key'\n    },\n    body: JSON.stringify({\n      model: \"claude-3.7-sonnet-20250219\",\n      messages: [\n        {\n          role: \"user\",\n          content: \"Roblox Studio에서 플랫폼 게임을 만드는 데 도움이 필요합니다\"\n        }\n      ],\n      tool_choice: \"auto\",\n      tools: [\n        {\n          function: {\n            name: \"mcp\",\n            description: \"Roblox Studio MCP 서버 호출\",\n            parameters: {\n              type: \"object\",\n              properties: {\n                server_url: {\n                  type: \"string\",\n                  description: \"MCP 서버의 URL\"\n                },\n                tool_name: {\n                  type: \"string\",\n                  description: \"호출할 MCP 도구의 이름\"\n                },\n                tool_parameters: {\n                  type: \"object\",\n                  description: \"MCP 도구의 매개변수\"\n                }\n              },\n              required: [\"server_url\", \"tool_name\"]\n            }\n          }\n        }\n      ]\n    })\n  });\n  \n  return await response.json();\n}\n```\n\n### 예제 2: MCP CLI 도구 사용\n\n명령줄을 통해 MCP 서버를 사용할 수도 있습니다:\n\n```bash\n# MCP 클라이언트 CLI 설치\nnpm install -g @modelcontextprotocol/cli\n\n# MCP 서버에 연결\nmcp connect http://localhost:3000\n\n# MCP 도구 사용\nmcp tool generate-roblox-code --scriptType=ServerScript --functionality=\"플레이어 이동 처리\" --includeComments=true\n\n# 템플릿 액세스\nmcp resource template://roblox/game/platformer\n```\n\n### 예제 3: Anthropic의 Claude 연결\n\n```python\nimport anthropic\nfrom anthropic.tool_use import MCP\n\n# Claude 클라이언트 초기화\nclient = anthropic.Client(api_key=\"your-anthropic-api-key\")\n\n# MCP 연결 만들기\nmcp = MCP(server_url=\"http://localhost:3000\")\n\n# MCP 기능을 갖춘 Claude에 메시지 보내기\nresponse = client.messages.create(\n    model=\"claude-3.7-sonnet-20250219\",\n    max_tokens=1000,\n    system=\"당신은 Roblox Studio MCP 서버에 액세스할 수 있는 유용한 AI 어시스턴트입니다.\",\n    messages=[\n        {\n            \"role\": \"user\",\n            \"content\": \"Roblox Studio에서 멀티플레이어 게임을 만들고 싶습니다. 어떤 도구를 사용해야 할까요?\"\n        }\n    ],\n    tools=[mcp.to_tool()]\n)\n\nprint(response.content)\n```\n\n## 문제 해결\n\n### 일반적인 문제\n\n1. **연결 오류**: Roblox API 키가 올바르게 구성되어 있는지 확인하세요.\n2. **인증 실패**: JWT 비밀 키가 올바르게 설정되어 있는지 확인하세요.\n3. **높은 메모리 사용량**: 메모리 사용량을 관리하기 위해 Cache TTL 설정을 조정하세요.\n4. **속도 제한 오류**: 환경에 맞게 `RATE_LIMIT_*` 설정을 조정하세요.\n\n### 로깅\n\n문제 디버깅을 위한 상세 로깅을 활성화하려면 `LOG_LEVEL=debug`를 설정하세요.\n\n## 기여\n\n기여를 환영합니다! PR을 자유롭게 제출해 주세요.\n\n1. 저장소 포크\n2. 기능 브랜치 생성(`git checkout -b feature/amazing-feature`)\n3. 변경사항 커밋(`git commit -m 'Add some amazing feature'`)\n4. 브랜치에 푸시(`git push origin feature/amazing-feature`)\n5. 풀 리퀘스트 열기\n\n## 라이선스\n\nMIT\n